<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>解决小集群中某节点比其它节点慢的问题（续） | 石京昶的博客</title><meta name=keywords content><meta name=description content="来源 在上篇文章中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍， 临时的解决方案是强制清除page cache：echo 1 > /proc/sys/vm/drop_caches. 但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。
解决 某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图
图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。 这导致了整体性能下降。
为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。 这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。 所以这是一个系统回收内存的策略设定问题。
Linux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 zone_reclaim_mode。
Zone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory."><meta name=author content="Shi Jingchang"><link rel=canonical href=https://shijingchang.cn/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti/><meta name=google-site-verification content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style><link rel=preload href=/blog-logo.jpg as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://shijingchang.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://shijingchang.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://shijingchang.cn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://shijingchang.cn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://shijingchang.cn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.102.3"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/css/extra.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="解决小集群中某节点比其它节点慢的问题（续）"><meta property="og:description" content="来源 在上篇文章中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍， 临时的解决方案是强制清除page cache：echo 1 > /proc/sys/vm/drop_caches. 但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。
解决 某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图
图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。 这导致了整体性能下降。
为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。 这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。 所以这是一个系统回收内存的策略设定问题。
Linux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 zone_reclaim_mode。
Zone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory."><meta property="og:type" content="article"><meta property="og:url" content="https://shijingchang.cn/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti/"><meta property="og:image" content="https://shijingchang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-01T22:37:20+08:00"><meta property="article:modified_time" content="2021-07-01T22:37:20+08:00"><meta property="og:site_name" content="石京昶的博客"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shijingchang.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="解决小集群中某节点比其它节点慢的问题（续）"><meta name=twitter:description content="来源 在上篇文章中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍， 临时的解决方案是强制清除page cache：echo 1 > /proc/sys/vm/drop_caches. 但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。
解决 某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图
图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。 这导致了整体性能下降。
为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。 这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。 所以这是一个系统回收内存的策略设定问题。
Linux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 zone_reclaim_mode。
Zone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://shijingchang.cn/posts/"},{"@type":"ListItem","position":2,"name":"解决小集群中某节点比其它节点慢的问题（续）","item":"https://shijingchang.cn/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"解决小集群中某节点比其它节点慢的问题（续）","name":"解决小集群中某节点比其它节点慢的问题（续）","description":"来源 在上篇文章中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍， 临时的解决方案是强制清除page cache：echo 1 \u0026gt; /proc/sys/vm/drop_caches. 但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。\n解决 某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图\n图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。 这导致了整体性能下降。\n为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。 这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。 所以这是一个系统回收内存的策略设定问题。\nLinux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 zone_reclaim_mode。\nZone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory.","keywords":[],"articleBody":"来源 在上篇文章中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍， 临时的解决方案是强制清除page cache：echo 1 \u003e /proc/sys/vm/drop_caches. 但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。\n解决 某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图\n图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。 这导致了整体性能下降。\n为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。 这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。 所以这是一个系统回收内存的策略设定问题。\nLinux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 zone_reclaim_mode。\nZone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory. If it is set to zero then no zone reclaim occurs. Allocations will be satisfied from other zones / nodes in the system.\n1\t= Zone reclaim on\n2\t= Zone reclaim writes dirty pages out\n4\t= Zone reclaim swaps pages\nzone_reclaim_mode is disabled by default. For file servers or workloads that benefit from having their data cached, zone_reclaim_mode should be left disabled as the caching effect is likely to be more important than data locality.\nzone_reclaim may be enabled if it’s known that the workload is partitioned such that each partition fits within a NUMA node and that accessing remote memory would cause a measurable performance reduction. The page allocator will then reclaim easily reusable pages (those page cache pages that are currently not used) before allocating off node pages.\n所以我修改值为1启用本地回收策略。 0适用于文件服务器，不适合 CFD 场景。 修改之后，测试了两次，应该解决了问题。 node6 上本来跑着一个 40 核的 CFD 任务，但是性能明显慢。 numastat -c solver-mpi 查看 NUMA 内存分布如预期的不合理。 于是停掉该任务，echo 1 \u003e /proc/sys/vm/zone_reclaim_mode，但是不清空 page cache。 再次提交该 CFD 任务，性能合乎预期。\n永久设定本地回收策略的方式是\n修改/etc/sysctl.conf 添加vm.zone_reclaim_mode=0 重载配置sysctl -p 参考：\nRedhat: Performance analysis and tuning - Part 1 其它影响 NUMA 的系统设定参数: min_free_kbytes, swappiness 数据库服务器一定要关闭NUMA参数 认为数据库也要使用值为0。 数据库内核月报 － 2020 / 09 page cache 对数据库性能的影响及调优过程。 Linux 的 Page Cache 解释了 page cache。 其它 Linux 系统性能调优工具：\nsar -f /var/log/sa/sa01 -r 显示sa01文件记录当天的内存使用情况 free -h 显示当前内存使用情况，-h表示人类易读格式 ","wordCount":"290","inLanguage":"en","datePublished":"2021-07-01T22:37:20+08:00","dateModified":"2021-07-01T22:37:20+08:00","author":{"@type":"Person","name":"Shi Jingchang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://shijingchang.cn/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti/"},"publisher":{"@type":"Organization","name":"石京昶的博客","logo":{"@type":"ImageObject","url":"https://shijingchang.cn/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://shijingchang.cn/ accesskey=h title="石京昶的博客 (Alt + H)"><img src=https://shijingchang.cn/blog-logo.jpg alt=logo aria-label=logo height=35>石京昶的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://shijingchang.cn title=关于><span>关于</span></a></li><li><a href=https://shijingchang.cn/index.xml title=RSS><span>RSS</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://shijingchang.cn/>Home</a>&nbsp;»&nbsp;<a href=https://shijingchang.cn/posts/>Posts</a></div><h1 class=post-title>解决小集群中某节点比其它节点慢的问题（续）</h1><div class=post-meta><span title='2021-07-01 22:37:20 +0800 CST'>July 1, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Shi Jingchang</div></header><div class=post-content><h1 id=来源>来源<a hidden class=anchor aria-hidden=true href=#来源>#</a></h1><p>在<a href=https://shijingchang.cn/blog/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster/index.html>上篇文章</a>中，之前 NUMA 配置不当导致小集群上计算节点跑某 CFD 商业软件比预期慢一倍，
临时的解决方案是强制清除<code>page cache</code>：<code>echo 1 > /proc/sys/vm/drop_caches</code>.
但希望修改系统设定，使得 NUMA 设定适用于 CFD 场景。</p><h1 id=解决>解决<a hidden class=anchor aria-hidden=true href=#解决>#</a></h1><p>某 CFD 商业软件跑满计算节点 40 核并且跑得慢的时候其使用 NUMA 架构内存情况如下图</p><p><img loading=lazy src=NUMA_memory_layout_slow_performance.png alt="CFD 软件性能慢的时候 NUMA 内存分布" title="CFD 软件性能慢的时候 NUMA 内存分布"></p><p>图中可以看到在 CPU 0 上的进程占用的内存有一半放在了 CPU 1 对应的内存上。
这导致了整体性能下降。</p><p>为何系统会让 CPU 0 上的进程同时使用 CPU 0 和 CPU 1 上的内存？而 CPU 1 上的进程只使用 CPU 1 上的内存。
这个问题并不会发生在 page cache 被清空后立刻提交的 40 核计算任务上，只有 page cache 足够大，导致 free 不够的时候。
所以这是一个系统回收内存的策略设定问题。</p><p>Linux 系统回收 NUMA 架构下内存的设定被一个重要参数左右，这就是 <code>zone_reclaim_mode</code>。</p><blockquote><p>Zone_reclaim_mode allows someone to set more or less aggressive approaches to reclaim memory when a zone runs out of memory. If it is set to zero then no zone reclaim occurs. Allocations will be satisfied from other zones / nodes in the system.</p><p>1 = Zone reclaim on</p><p>2 = Zone reclaim writes dirty pages out</p><p>4 = Zone reclaim swaps pages</p><p>zone_reclaim_mode is disabled by default. For file servers or workloads that benefit from having their data cached, zone_reclaim_mode should be left disabled as the caching effect is likely to be more important than data locality.</p><p>zone_reclaim may be enabled if it&rsquo;s known that the workload is partitioned such that each partition fits within a NUMA node and that accessing remote memory would cause a measurable performance reduction. The page allocator will then reclaim easily reusable pages (those page cache pages that are currently not used) before allocating off node pages.</p></blockquote><p>所以我修改值为<code>1</code>启用本地回收策略。
<code>0</code>适用于文件服务器，不适合 CFD 场景。
修改之后，测试了两次，应该解决了问题。
<code>node6</code> 上本来跑着一个 40 核的 CFD 任务，但是性能明显慢。
<code>numastat -c solver-mpi</code> 查看 NUMA 内存分布如预期的不合理。
于是停掉该任务，<code>echo 1 > /proc/sys/vm/zone_reclaim_mode</code>，但是不清空 page cache。
再次提交该 CFD 任务，性能合乎预期。</p><p>永久设定本地回收策略的方式是</p><ol><li>修改<code>/etc/sysctl.conf</code></li><li>添加<code>vm.zone_reclaim_mode=0</code></li><li>重载配置<code>sysctl -p</code></li></ol><p>参考：</p><ul><li><a href=Performance_analysis_and_tuning_NUMA_huge_page.pdf>Redhat: Performance analysis and tuning - Part 1</a><ul><li>其它影响 NUMA 的系统设定参数: <code>min_free_kbytes, swappiness</code></li></ul></li><li><a href="http://www.gbase8a.com/home.php?mod=space&uid=52&do=blog&id=17">数据库服务器一定要关闭NUMA参数</a> 认为数据库也要使用值为<code>0</code>。</li><li><a href=http://mysql.taobao.org/monthly/2020/09/01/>数据库内核月报 － 2020 / 09</a> page cache 对数据库性能的影响及调优过程。</li><li><a href=https://spongecaptain.cool/SimpleClearFileIO/1.%20page%20cache.html>Linux 的 Page Cache</a> 解释了 page cache。</li></ul><p>其它 Linux 系统性能调优工具：</p><ul><li><code>sar -f /var/log/sa/sa01 -r</code> 显示<code>sa01</code>文件记录当天的内存使用情况</li><li><code>free -h</code> 显示当前内存使用情况，<code>-h</code>表示人类易读格式</li></ul></div><footer class=post-footer><nav class=paginav><a class=prev href=https://shijingchang.cn/posts/adjust_intel_mpi_parameters_to_improve_performance/><span class=title>« Prev Page</span><br><span>调整Intel MPI 2018中的参数提升通信性能</span></a>
<a class=next href=https://shijingchang.cn/posts/resolve_issue_of_poor_performance_of_one_node_in_a_cluster/><span class=title>Next Page »</span><br><span>解决小集群中某节点比其它节点慢的问题</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on twitter" href="https://twitter.com/intent/tweet/?text=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89&url=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f&title=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89&summary=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89&source=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f&title=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on whatsapp" href="https://api.whatsapp.com/send?text=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89%20-%20https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 解决小集群中某节点比其它节点慢的问题（续） on telegram" href="https://telegram.me/share/url?text=%e8%a7%a3%e5%86%b3%e5%b0%8f%e9%9b%86%e7%be%a4%e4%b8%ad%e6%9f%90%e8%8a%82%e7%82%b9%e6%af%94%e5%85%b6%e5%ae%83%e8%8a%82%e7%82%b9%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98%ef%bc%88%e7%bb%ad%ef%bc%89&url=https%3a%2f%2fshijingchang.cn%2fposts%2fresolve_issue_of_poor_performance_of_one_node_in_a_cluster_conti%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://shijingchang.cn/>石京昶的博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>